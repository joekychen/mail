<!DOCTYPE html>
<html><head><title>joekychen/mail » lib › mail › field.rb

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>field.rb</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="nb">require</span> <span class="s1">&#39;mail/fields&#39;</span></pre></div></td></tr>


<tr id="section-2"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-2">&#182;</a></div><p>encoding: utf-8</p></td><td class="code"><div class="highlight"><pre><span class="k">module</span> <span class="nn">Mail</span></pre></div></td></tr>


<tr id="section-3"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-3">&#182;</a></div><p>Provides a single class to call to create a new structured or unstructured
field.  Works out per RFC what field of field it is being given and returns
the correct field of class back on new.</p>

<p>===Per RFC 2822</p>

<p>2.2. Header Fields</p>

<pre><code>Header fields are lines composed of a field name, followed by a colon
(":"), followed by a field body, and terminated by CRLF.  A field
name MUST be composed of printable US-ASCII characters (i.e.,
characters that have values between 33 and 126, inclusive), except
colon.  A field body may be composed of any US-ASCII characters,
except for CR and LF.  However, a field body may contain CRLF when
used in header "folding" and  "unfolding" as described in section
2.2.3.  All field bodies MUST conform to the syntax described in
sections 3 and 4 of this standard.
</code></pre></td><td class="code"><div class="highlight"><pre>  <span class="k">class</span> <span class="nc">Field</span>
    
    <span class="kp">include</span> <span class="no">Patterns</span>
    <span class="kp">include</span> <span class="no">Comparable</span>
    
    <span class="no">STRUCTURED_FIELDS</span> <span class="o">=</span> <span class="sx">%w[ bcc cc content-description content-disposition</span>
<span class="sx">                            content-id content-location content-transfer-encoding</span>
<span class="sx">                            content-type date from in-reply-to keywords message-id</span>
<span class="sx">                            mime-version received references reply-to</span>
<span class="sx">                            resent-bcc resent-cc resent-date resent-from</span>
<span class="sx">                            resent-message-id resent-sender resent-to</span>
<span class="sx">                            return-path sender to ]</span>

    <span class="no">KNOWN_FIELDS</span> <span class="o">=</span> <span class="no">STRUCTURED_FIELDS</span> <span class="o">+</span> <span class="o">[</span><span class="s1">&#39;comments&#39;</span><span class="p">,</span> <span class="s1">&#39;subject&#39;</span><span class="o">]</span>
    </pre></div></td></tr>


<tr id="section-4"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-4">&#182;</a></div><p>Generic Field Exception</p></td><td class="code"><div class="highlight"><pre>    <span class="k">class</span> <span class="nc">FieldError</span> <span class="o">&lt;</span> <span class="no">StandardError</span>
    <span class="k">end</span></pre></div></td></tr>


<tr id="section-5"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-5">&#182;</a></div><p>Raised when a parsing error has occurred (ie, a StructuredField has tried
to parse a field that is invalid or improperly written)</p></td><td class="code"><div class="highlight"><pre>    <span class="k">class</span> <span class="nc">ParseError</span> <span class="o">&lt;</span> <span class="no">FieldError</span> <span class="c1">#:nodoc:</span>
      <span class="kp">attr_accessor</span> <span class="ss">:element</span><span class="p">,</span> <span class="ss">:value</span><span class="p">,</span> <span class="ss">:reason</span>

      <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">reason</span><span class="p">)</span>
        <span class="vi">@element</span> <span class="o">=</span> <span class="n">element</span>
        <span class="vi">@value</span> <span class="o">=</span> <span class="n">value</span>
        <span class="vi">@reason</span> <span class="o">=</span> <span class="n">reason</span>
        <span class="k">super</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">#{</span><span class="n">element</span><span class="si">}</span><span class="s2"> can not parse |</span><span class="si">#{</span><span class="n">value</span><span class="si">}</span><span class="s2">|</span><span class="se">\n</span><span class="s2">Reason was: </span><span class="si">#{</span><span class="n">reason</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
      <span class="k">end</span>
    <span class="k">end</span></pre></div></td></tr>


<tr id="section-6"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-6">&#182;</a></div><p>Raised when attempting to set a structured field's contents to an invalid syntax</p></td><td class="code"><div class="highlight"><pre>    <span class="k">class</span> <span class="nc">SyntaxError</span> <span class="o">&lt;</span> <span class="no">FieldError</span> <span class="c1">#:nodoc:</span>
    <span class="k">end</span>
    </pre></div></td></tr>


<tr id="section-7"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-7">&#182;</a></div><p>Accepts a string:</p>

<p>Field.new("field-name: field data")</p>

<p>Or name, value pair:</p>

<p>Field.new("field-name", "value")</p>

<p>Or a name by itself:</p>

<p>Field.new("field-name")</p>

<p>Note, does not want a terminating carriage return.  Returns
self appropriately parsed.  If value is not a string, then
it will be passed through as is, for example, content-type
field can accept an array with the type and a hash of 
parameters:</p>

<p>Field.new('content-type', ['text', 'plain', {:charset => 'UTF-8'}])</p></td><td class="code"><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="nb">name</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="kp">nil</span><span class="p">,</span> <span class="n">charset</span> <span class="o">=</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
      <span class="k">case</span>
      <span class="k">when</span> <span class="nb">name</span> <span class="o">=~</span> <span class="sr">/:/</span>                  <span class="c1"># Field.new(&quot;field-name: field data&quot;)</span>
        <span class="n">charset</span> <span class="o">=</span> <span class="n">value</span> <span class="k">unless</span> <span class="n">value</span><span class="o">.</span><span class="n">blank?</span>
        <span class="nb">name</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="nb">split</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span>
        <span class="n">create_field</span><span class="p">(</span><span class="nb">name</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">charset</span><span class="p">)</span>
      <span class="k">when</span> <span class="nb">name</span> <span class="o">!~</span> <span class="sr">/:/</span> <span class="o">&amp;&amp;</span> <span class="n">value</span><span class="o">.</span><span class="n">blank?</span>  <span class="c1"># Field.new(&quot;field-name&quot;)</span>
        <span class="n">create_field</span><span class="p">(</span><span class="nb">name</span><span class="p">,</span> <span class="kp">nil</span><span class="p">,</span> <span class="n">charset</span><span class="p">)</span>
      <span class="k">else</span>                              <span class="c1"># Field.new(&quot;field-name&quot;, &quot;value&quot;)</span>
        <span class="n">create_field</span><span class="p">(</span><span class="nb">name</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">charset</span><span class="p">)</span>
      <span class="k">end</span>
      <span class="k">return</span> <span class="nb">self</span>
    <span class="k">end</span>

    <span class="k">def</span> <span class="nf">field</span><span class="o">=</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
      <span class="vi">@field</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">end</span>
    
    <span class="k">def</span> <span class="nf">field</span>
      <span class="vi">@field</span>
    <span class="k">end</span>
    
    <span class="k">def</span> <span class="nf">name</span>
      <span class="n">field</span><span class="o">.</span><span class="n">name</span>
    <span class="k">end</span>
    
    <span class="k">def</span> <span class="nf">value</span>
      <span class="n">field</span><span class="o">.</span><span class="n">value</span>
    <span class="k">end</span>
    
    <span class="k">def</span> <span class="nf">value</span><span class="o">=</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
      <span class="n">create_field</span><span class="p">(</span><span class="nb">name</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">charset</span><span class="p">)</span>
    <span class="k">end</span>
    
    <span class="k">def</span> <span class="nf">to_s</span>
      <span class="n">field</span><span class="o">.</span><span class="n">to_s</span>
    <span class="k">end</span>
    
    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="nb">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
      <span class="n">create_field</span><span class="p">(</span><span class="nb">name</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">charset</span><span class="p">)</span>
    <span class="k">end</span>
    
    <span class="k">def</span> <span class="nf">same</span><span class="p">(</span> <span class="n">other</span> <span class="p">)</span>
      <span class="n">match_to_s</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
    <span class="k">end</span>
    
    <span class="n">alias_method</span> <span class="ss">:==</span><span class="p">,</span> <span class="ss">:same</span>
    
    <span class="k">def</span> <span class="nf">&lt;=&gt;</span><span class="p">(</span> <span class="n">other</span> <span class="p">)</span>
      <span class="n">self_order</span> <span class="o">=</span> <span class="no">FIELD_ORDER</span><span class="o">.</span><span class="n">rindex</span><span class="p">(</span><span class="nb">self</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">to_s</span><span class="o">.</span><span class="n">downcase</span><span class="p">)</span> <span class="o">||</span> <span class="mi">100</span>
      <span class="n">other_order</span> <span class="o">=</span> <span class="no">FIELD_ORDER</span><span class="o">.</span><span class="n">rindex</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">to_s</span><span class="o">.</span><span class="n">downcase</span><span class="p">)</span> <span class="o">||</span> <span class="mi">100</span>
      <span class="n">self_order</span> <span class="o">&lt;=&gt;</span> <span class="n">other_order</span>
    <span class="k">end</span>
    
    <span class="k">def</span> <span class="nf">method_missing</span><span class="p">(</span><span class="nb">name</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
      <span class="n">field</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="nb">name</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
    <span class="k">end</span>
    
    <span class="no">FIELD_ORDER</span> <span class="o">=</span> <span class="sx">%w[ return-path received</span>
<span class="sx">                      resent-date resent-from resent-sender resent-to</span>
<span class="sx">                      resent-cc resent-bcc resent-message-id</span>
<span class="sx">                      date from sender reply-to to cc bcc</span>
<span class="sx">                      message-id in-reply-to references</span>
<span class="sx">                      subject comments keywords</span>
<span class="sx">                      mime-version content-type content-transfer-encoding</span>
<span class="sx">                      content-location content-disposition content-description ]</span>
    
    <span class="kp">private</span>
    
    <span class="k">def</span> <span class="nf">split</span><span class="p">(</span><span class="n">raw_field</span><span class="p">)</span>
      <span class="n">match_data</span> <span class="o">=</span> <span class="n">raw_field</span><span class="o">.</span><span class="n">mb_chars</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sr">/^(</span><span class="si">#{</span><span class="no">FIELD_NAME</span><span class="si">}</span><span class="sr">)\s*:\s*(</span><span class="si">#{</span><span class="no">FIELD_BODY</span><span class="si">}</span><span class="sr">)?$/</span><span class="p">)</span>
      <span class="o">[</span><span class="n">match_data</span><span class="o">[</span><span class="mi">1</span><span class="o">].</span><span class="n">to_s</span><span class="o">.</span><span class="n">mb_chars</span><span class="o">.</span><span class="n">strip</span><span class="p">,</span> <span class="n">match_data</span><span class="o">[</span><span class="mi">2</span><span class="o">].</span><span class="n">to_s</span><span class="o">.</span><span class="n">mb_chars</span><span class="o">.</span><span class="n">strip</span><span class="o">]</span>
    <span class="k">rescue</span>
      <span class="no">STDERR</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&quot;WARNING: Could not parse (and so ignorning) &#39;</span><span class="si">#{</span><span class="n">raw_field</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
    <span class="k">end</span>
    
    <span class="k">def</span> <span class="nf">create_field</span><span class="p">(</span><span class="nb">name</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">charset</span><span class="p">)</span>
      <span class="k">begin</span>
        <span class="nb">self</span><span class="o">.</span><span class="n">field</span> <span class="o">=</span> <span class="n">new_field</span><span class="p">(</span><span class="nb">name</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">charset</span><span class="p">)</span>
      <span class="k">rescue</span> <span class="no">Mail</span><span class="o">::</span><span class="no">Field</span><span class="o">::</span><span class="no">ParseError</span> <span class="o">=&gt;</span> <span class="n">e</span>
        <span class="nb">self</span><span class="o">.</span><span class="n">field</span> <span class="o">=</span> <span class="no">Mail</span><span class="o">::</span><span class="no">UnstructuredField</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="nb">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="nb">self</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">errors</span> <span class="o">&lt;&lt;</span> <span class="o">[</span><span class="nb">name</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">e</span><span class="o">]</span>
        <span class="nb">self</span><span class="o">.</span><span class="n">field</span>
      <span class="k">end</span>
    <span class="k">end</span>

    <span class="k">def</span> <span class="nf">new_field</span><span class="p">(</span><span class="nb">name</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">charset</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-8"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-8">&#182;</a></div><p>Could do this with constantize and make it "as DRY as", but a simple case 
statement is, well, simpler... </p></td><td class="code"><div class="highlight"><pre>      <span class="k">case</span> <span class="nb">name</span><span class="o">.</span><span class="n">to_s</span><span class="o">.</span><span class="n">downcase</span>
      <span class="k">when</span> <span class="sr">/^to$/i</span>
        <span class="no">ToField</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">charset</span><span class="p">)</span>
      <span class="k">when</span> <span class="sr">/^cc$/i</span>
        <span class="no">CcField</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">charset</span><span class="p">)</span>
      <span class="k">when</span> <span class="sr">/^bcc$/i</span>
        <span class="no">BccField</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">charset</span><span class="p">)</span>
      <span class="k">when</span> <span class="sr">/^message-id$/i</span>
        <span class="no">MessageIdField</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">charset</span><span class="p">)</span>
      <span class="k">when</span> <span class="sr">/^in-reply-to$/i</span>
        <span class="no">InReplyToField</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">charset</span><span class="p">)</span>
      <span class="k">when</span> <span class="sr">/^references$/i</span>
        <span class="no">ReferencesField</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">charset</span><span class="p">)</span>
      <span class="k">when</span> <span class="sr">/^subject$/i</span>
        <span class="no">SubjectField</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">charset</span><span class="p">)</span>
      <span class="k">when</span> <span class="sr">/^comments$/i</span>
        <span class="no">CommentsField</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">charset</span><span class="p">)</span>
      <span class="k">when</span> <span class="sr">/^keywords$/i</span>
        <span class="no">KeywordsField</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">charset</span><span class="p">)</span>
      <span class="k">when</span> <span class="sr">/^date$/i</span>
        <span class="no">DateField</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">charset</span><span class="p">)</span>
      <span class="k">when</span> <span class="sr">/^from$/i</span>
        <span class="no">FromField</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">charset</span><span class="p">)</span>
      <span class="k">when</span> <span class="sr">/^sender$/i</span>
        <span class="no">SenderField</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">charset</span><span class="p">)</span>
      <span class="k">when</span> <span class="sr">/^reply-to$/i</span>
        <span class="no">ReplyToField</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">charset</span><span class="p">)</span>
      <span class="k">when</span> <span class="sr">/^resent-date$/i</span>
        <span class="no">ResentDateField</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">charset</span><span class="p">)</span>
      <span class="k">when</span> <span class="sr">/^resent-from$/i</span>
        <span class="no">ResentFromField</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">charset</span><span class="p">)</span>
      <span class="k">when</span> <span class="sr">/^resent-sender$/i</span> 
        <span class="no">ResentSenderField</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">charset</span><span class="p">)</span>
      <span class="k">when</span> <span class="sr">/^resent-to$/i</span>
        <span class="no">ResentToField</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">charset</span><span class="p">)</span>
      <span class="k">when</span> <span class="sr">/^resent-cc$/i</span>
        <span class="no">ResentCcField</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">charset</span><span class="p">)</span>
      <span class="k">when</span> <span class="sr">/^resent-bcc$/i</span>
        <span class="no">ResentBccField</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">charset</span><span class="p">)</span>
      <span class="k">when</span> <span class="sr">/^resent-message-id$/i</span>
        <span class="no">ResentMessageIdField</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">charset</span><span class="p">)</span>
      <span class="k">when</span> <span class="sr">/^return-path$/i</span>
        <span class="no">ReturnPathField</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">charset</span><span class="p">)</span>
      <span class="k">when</span> <span class="sr">/^received$/i</span>
        <span class="no">ReceivedField</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">charset</span><span class="p">)</span>
      <span class="k">when</span> <span class="sr">/^mime-version$/i</span>
        <span class="no">MimeVersionField</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">charset</span><span class="p">)</span>
      <span class="k">when</span> <span class="sr">/^content-transfer-encoding$/i</span>
        <span class="no">ContentTransferEncodingField</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">charset</span><span class="p">)</span>
      <span class="k">when</span> <span class="sr">/^content-description$/i</span>
        <span class="no">ContentDescriptionField</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">charset</span><span class="p">)</span>
      <span class="k">when</span> <span class="sr">/^content-disposition$/i</span>
        <span class="no">ContentDispositionField</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">charset</span><span class="p">)</span>
      <span class="k">when</span> <span class="sr">/^content-type$/i</span>
        <span class="no">ContentTypeField</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">charset</span><span class="p">)</span>
      <span class="k">when</span> <span class="sr">/^content-id$/i</span>
        <span class="no">ContentIdField</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">charset</span><span class="p">)</span>
      <span class="k">when</span> <span class="sr">/^content-location$/i</span>
        <span class="no">ContentLocationField</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">charset</span><span class="p">)</span>
      <span class="k">else</span> 
        <span class="no">OptionalField</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="nb">name</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">charset</span><span class="p">)</span>
      <span class="k">end</span>
      
    <span class="k">end</span>

  <span class="k">end</span>
  
<span class="k">end</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/mail",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
