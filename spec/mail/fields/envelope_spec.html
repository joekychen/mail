<!DOCTYPE html>
<html><head><title>joekychen/mail » spec › mail › fields › envelope_spec.rb

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>envelope_spec.rb</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="nb">require</span> <span class="s1">&#39;spec_helper&#39;</span>

<span class="n">describe</span> <span class="no">Mail</span><span class="o">::</span><span class="no">Envelope</span> <span class="k">do</span></pre></div></td></tr>


<tr id="section-2"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-2">&#182;</a></div><p>From RFC4155 The application/mbox Media Type</p>

<p>o Each message in the mbox database MUST be immediately preceded
    by a single separator line, which MUST conform to the following
    syntax:</p>

<pre><code>   The exact character sequence of "From";

   a single Space character (0x20);

   the email address of the message sender (as obtained from the
   message envelope or other authoritative source), conformant
   with the "addr-spec" syntax from RFC 2822;

   a single Space character;

   a timestamp indicating the UTC date and time when the message
   was originally received, conformant with the syntax of the
   traditional UNIX 'ctime' output sans timezone (note that the
   use of UTC precludes the need for a timezone indicator);

   an end-of-line marker.
</code></pre></td><td class="code"><div class="highlight"><pre>  <span class="n">it</span> <span class="s2">&quot;should initialize&quot;</span> <span class="k">do</span>
    <span class="n">doing</span> <span class="p">{</span> <span class="no">Mail</span><span class="o">::</span><span class="no">Envelope</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">&#39;mikel@test.lindsaar.net Mon May  2 16:07:05 2005&#39;</span><span class="p">)</span> <span class="p">}</span><span class="o">.</span><span class="n">should_not</span> <span class="n">raise_error</span>
  <span class="k">end</span>

  <span class="n">it</span> <span class="s2">&quot;should return the envelope from element tree&quot;</span> <span class="k">do</span>
    <span class="n">envelope</span> <span class="o">=</span> <span class="no">Mail</span><span class="o">::</span><span class="no">Envelope</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">&#39;mikel@test.lindsaar.net Mon May  2 16:07:05 2005&#39;</span><span class="p">)</span>
    <span class="n">envelope</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">class</span><span class="o">.</span><span class="n">should</span> <span class="n">eq</span> <span class="no">Treetop</span><span class="o">::</span><span class="no">Runtime</span><span class="o">::</span><span class="no">SyntaxNode</span>
  <span class="k">end</span>

  <span class="n">describe</span> <span class="s2">&quot;accessor methods&quot;</span> <span class="k">do</span>
    <span class="n">it</span> <span class="s2">&quot;should return the address&quot;</span> <span class="k">do</span>
      <span class="n">envelope</span> <span class="o">=</span> <span class="no">Mail</span><span class="o">::</span><span class="no">Envelope</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;mikel@test.lindsaar.net Mon Aug 17 00:39:21 2009&quot;</span><span class="p">)</span>
      <span class="n">envelope</span><span class="o">.</span><span class="n">from</span><span class="o">.</span><span class="n">should</span> <span class="n">eq</span> <span class="s2">&quot;mikel@test.lindsaar.net&quot;</span>
    <span class="k">end</span>

    <span class="n">it</span> <span class="s2">&quot;should return the date_time&quot;</span> <span class="k">do</span>
      <span class="n">envelope</span> <span class="o">=</span> <span class="no">Mail</span><span class="o">::</span><span class="no">Envelope</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;mikel@test.lindsaar.net Mon Aug 17 00:39:21 2009&quot;</span><span class="p">)</span>
      <span class="n">envelope</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">should</span> <span class="n">eq</span> <span class="o">::</span><span class="no">DateTime</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s2">&quot;Mon Aug 17 00:39:21 2009&quot;</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>

<span class="k">end</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/mail",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
